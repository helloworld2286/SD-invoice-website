<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      background: #ffffff;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 700px;
    }
    .logo {
      width: 160px;
      display: block;
      margin: 0 auto 10px;
    }
    h1 {
      text-align: center;
      font-size: 18px;
      margin-bottom: 30px;
      color: #1f2937;
    }
    label {
      display: block;
      margin-bottom: 6px;
      color: #4b5563;
      font-weight: 600;
    }

    input[type="text"],
    input[type="number"],
    input[type="date"] {
      width: 100%;
      padding: 12px;
      margin-bottom: 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      background-color: #f9fafb;
      font-size: 14px;
    }
    .item-group {
      display: flex;
      gap: 12px;
      margin-bottom: 12px;
    }
    .item-group input {
      flex: 1;
    }
    .add-btn {
      display: inline-block;
      padding: 10px 18px;
      font-size: 14px;
      background-color: #10b981;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-bottom: 20px;
    }
    button {
      width: 100%;
      background-color: #3b82f6;
      color: white;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #2563eb;
    }
    .footer {
      margin-top: 30px;
      font-size: 13px;
      color: #6b7280;
      text-align: center;
      border-top: 1px solid #e5e7eb;
      padding-top: 20px;
    }
    .checkbox-container {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    .checkbox-container input {
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo.png" class="logo" alt="Company Logo">
    <h1>SATYAM DIAMONDS</h1>

    <label>Invoice No:</label>
    <input id="invoiceNo" type="number" placeholder="Enter invoice number">

    <label>Date:</label>
    <input id="date" type="date">

    <label>Customer Name:</label>
    <input id="customerName" type="text" placeholder="Enter customer name">

    <label>Customer Address:</label>
    <input id="customerAddress" type="text" placeholder="Enter customer address">

    <label>Customer Phone:</label>
    <input id="customerPhone" type="number" placeholder="Enter customer phone number">

    <div id="itemsContainer">
      <label>Item Description and Price:</label>
      <div class="item-group">
        <input type="text" placeholder="Item Description">
        <input type="number" placeholder="Unit Price">
        <input type="number" placeholder="Discount">
      </div>
    </div>
    <button class="add-btn" onclick="addItem()">+ Add Another Item</button>

    <label>Deposit:</label>
    <input id="deposit" type="number" placeholder="Enter deposit amount">

    <div class="checkbox-container">
      <input type="checkbox" id="fullPaidCheckbox">
      <label for="fullPaidCheckbox">Full Amount Paid</label>
    </div>

    <button onclick="generatePDF()">Download Invoice</button>

    <div class="footer">
      <p><strong>Satyam Diamonds</strong><br>
      Suite #1503, 4 Robert Speck Parkway, Mississauga, ON<br>
      +1 437-522-2466 | info@satyamdiamond.com</p>
    </div>
  </div>

  <script>
    function addItem() {
      const container = document.getElementById("itemsContainer");
      const div = document.createElement("div");
      div.className = "item-group";
      div.innerHTML = `
        <input type="text" placeholder="Item Description">
        <input type="number" placeholder="Unit Price">
        <input type="number" placeholder="Discount">
      `;
      container.appendChild(div);
    }

    function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const pageWidth = doc.internal.pageSize.getWidth();
      const logoWidth = 90;
      const x = (pageWidth - logoWidth) / 2;

      const logoImg = new Image();
      logoImg.src = 'logo.png';
      logoImg.onload = () => {
        doc.addImage(logoImg, 'PNG', x, 5, 80, 60);

        const invoiceNo = document.getElementById("invoiceNo").value;
        const date = document.getElementById("date").value;
        const customerName = document.getElementById("customerName").value;
        const customerAddress = document.getElementById("customerAddress").value;
        const customerPhone = document.getElementById("customerPhone").value;
        const deposit = parseFloat(document.getElementById("deposit").value) || 0;
        const isPaid = document.getElementById("fullPaidCheckbox").checked;

        const itemGroups = document.querySelectorAll(".item-group");
        const rows = [["No.", "Item Description", "Unit Price", "Discount", "Total"]];

        let grandTotal = 0;

        itemGroups.forEach((group, index) => {
          const inputs = group.querySelectorAll("input");
          const desc = inputs[0].value;
          const unitPrice = parseFloat(inputs[1].value) || 0;
          const discount = parseFloat(inputs[2].value) || 0;
          const total = unitPrice - discount;
          grandTotal += total;

          rows.push([
            `${index + 1}`,
            desc,
            `$${unitPrice.toFixed(2)}`,
            `$${discount.toFixed(2)}`,
            `$${total.toFixed(2)}`
          ]);
        });

        let due = grandTotal - deposit;
        let paidNote = "";
        if (isPaid) {
          due = 0;
          paidNote = "FULL AMOUNT PAID";
        }

        rows.push(["", "", "", "Total", `$${grandTotal.toFixed(2)}`]);
        rows.push(["", "", "", "Deposit", `$${deposit.toFixed(2)}`]);
        rows.push(["", paidNote || "No Refund!! No Return!!", "", "Due", `$${due.toFixed(2)}`]);

        doc.setFontSize(12);
        doc.text(`Invoice No.: ${invoiceNo}`, 10, 55);
        doc.text(`Date: ${date}`, 150, 55);
        doc.text(`Bill To`, 10, 65);
        doc.text(`Customer Name: ${customerName}`, 10, 71);
        doc.text(`Address: ${customerAddress}`, 10, 77);
        doc.text(`Phone: ${customerPhone}`, 10, 83);

        doc.autoTable({
          startY: 90,
          body: rows,
          theme: 'grid',
          styles: { fontSize: 12, cellPadding: 3 },
          columnStyles: {
            0: { cellWidth: 20 },
            1: { cellWidth: 80 },
            2: { cellWidth: 25 },
            3: { cellWidth: 25 },
            4: { cellWidth: 25 },
          }
        });

        doc.text("Thanks for your business!", 105, doc.lastAutoTable.finalY + 15, { align: 'center' });

        const footerY = doc.lastAutoTable.finalY + 30;
        doc.setFontSize(12);
        doc.text("Satyam Diamonds", 10, footerY);
        doc.text("Suite #1503, 4 Robert Speck Parkway, Mississauga", 10, footerY + 6);
        doc.text("+1 437-522-2466 | info@satyamdiamond.com", 10, footerY + 12);

        doc.save(`Invoice_${invoiceNo}.pdf`);
      };
    }
  </script>
</body>
</html>
